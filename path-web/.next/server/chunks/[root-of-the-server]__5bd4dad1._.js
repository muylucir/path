module.exports=[921517,(e,t,o)=>{t.exports=e.x("http",()=>require("http"))},524836,(e,t,o)=>{t.exports=e.x("https",()=>require("https"))},477080,e=>{"use strict";var t=e.i(460663),o=e.i(572483),n=e.i(921517),i=e.i(524836);let r=["ECONNRESET","EPIPE","ETIMEDOUT"];var s=e.i(631781),a=e.i(599906);let c=3e3;var u=e.i(237071);class l{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(e){return"function"==typeof e?.handle?e:new l(e)}static checkSocketUsage(e,t,o=console){let{sockets:n,requests:i,maxSockets:r}=e;if("number"!=typeof r||r===1/0||Date.now()-15e3<t)return t;if(n&&i)for(let e in n){let t=n[e]?.length??0,s=i[e]?.length??0;if(t>=r&&s>=2*r)return o?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${t} and ${s} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return t}constructor(e){this.configProvider=new Promise((t,o)=>{"function"==typeof e?e().then(e=>{t(this.resolveDefaultConfig(e))}).catch(o):t(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:t,connectionTimeout:o,socketTimeout:r,socketAcquisitionWarningTimeout:s,httpAgent:a,httpsAgent:c,throwOnRequestTimeout:u}=e||{};return{connectionTimeout:o,requestTimeout:t,socketTimeout:r,socketAcquisitionWarningTimeout:s,throwOnRequestTimeout:u,httpAgent:a instanceof n.Agent||"function"==typeof a?.destroy?(this.externalAgent=!0,a):new n.Agent({keepAlive:!0,maxSockets:50,...a}),httpsAgent:c instanceof i.Agent||"function"==typeof c?.destroy?(this.externalAgent=!0,c):new i.Agent({keepAlive:!0,maxSockets:50,...c}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:h,requestTimeout:m}={}){return this.config||(this.config=await this.configProvider),new Promise((d,g)=>{let p,f,T=this.config,k=[],A=async e=>{await p,k.forEach(a.timing.clearTimeout),d(e)},v=async e=>{await p,k.forEach(a.timing.clearTimeout),g(e)};if(h?.aborted){let e=Error("Request aborted");e.name="AbortError",v(e);return}let y="https:"===e.protocol,E=e.headers??{},w=(E.Expect??E.expect)==="100-continue",q=y?T.httpsAgent:T.httpAgent;w&&!this.externalAgent&&(q=new(y?i.Agent:n.Agent)({keepAlive:!1,maxSockets:1/0})),k.push(a.timing.setTimeout(()=>{this.socketWarningTimestamp=l.checkSocketUsage(q,this.socketWarningTimestamp,T.logger)},T.socketAcquisitionWarningTimeout??(T.requestTimeout??2e3)+(T.connectionTimeout??1e3)));let b=(0,o.buildQueryString)(e.query||{});if(null!=e.username||null!=e.password){let t=e.username??"",o=e.password??"";f=`${t}:${o}`}let x=e.path;b&&(x+=`?${b}`),e.fragment&&(x+=`#${e.fragment}`);let R=e.hostname??"";R="["===R[0]&&R.endsWith("]")?e.hostname.slice(1,-1):e.hostname;let H={headers:e.headers,host:R,method:e.method,path:x,port:e.port,agent:q,auth:f},O=(y?i.request:n.request)(H,e=>{A({response:new t.HttpResponse({statusCode:e.statusCode||-1,reason:e.statusMessage,headers:(0,s.getTransformedHeaders)(e.headers),body:e})})});if(O.on("error",e=>{r.includes(e.code)?v(Object.assign(e,{name:"TimeoutError"})):v(e)}),h){let e=()=>{O.destroy();let e=Error("Request aborted");e.name="AbortError",v(e)};"function"==typeof h.addEventListener?(h.addEventListener("abort",e,{once:!0}),O.once("close",()=>h.removeEventListener("abort",e))):h.onabort=e}let P=m??T.requestTimeout;k.push(((e,t,o=0)=>{if(!o)return -1;let n=n=>{let i=a.timing.setTimeout(()=>{e.destroy(),t(Object.assign(Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${o} ms.`),{name:"TimeoutError"}))},o-n),r=e=>{e?.connecting?e.on("connect",()=>{a.timing.clearTimeout(i)}):a.timing.clearTimeout(i)};e.socket?r(e.socket):e.on("socket",r)};return o<2e3?(n(0),0):a.timing.setTimeout(n.bind(null,1e3),1e3)})(O,v,T.connectionTimeout)),k.push(((e,t,o=0,n,i)=>o?a.timing.setTimeout(()=>{let r=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${o} ms requestTimeout.`;if(n){let o=Object.assign(Error(r),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(o),t(o)}else r+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",i?.warn?.(r)},o):-1)(O,v,P,T.throwOnRequestTimeout,T.logger??console)),k.push(((e,t,o=0)=>{let n=n=>{let i=o-n,r=()=>{e.destroy(),t(Object.assign(Error(`@smithy/node-http-handler - the request socket timed out after ${o} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(i,r),e.on("close",()=>e.socket?.removeListener("timeout",r))):e.setTimeout(i,r)};return 0<o&&o<6e3?(n(0),0):a.timing.setTimeout(n.bind(null,3e3*(0!==o)),3e3)})(O,v,T.socketTimeout));let $=H.agent;"object"==typeof $&&"keepAlive"in $&&k.push(((e,{keepAlive:t,keepAliveMsecs:o},n=c)=>{if(!0!==t)return -1;let i=()=>{e.socket?e.socket.setKeepAlive(t,o||0):e.on("socket",e=>{e.setKeepAlive(t,o||0)})};return 0===n?(i(),0):a.timing.setTimeout(i,n)})(O,{keepAlive:$.keepAlive,keepAliveMsecs:$.keepAliveMsecs})),p=(0,u.writeRequestBody)(O,e,P,this.externalAgent).catch(e=>(k.forEach(a.timing.clearTimeout),g(e)))})}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(o=>({...o,[e]:t}))}httpHandlerConfigs(){return this.config??{}}}e.s(["NodeHttpHandler",()=>l],477080)},287573,e=>{"use strict";class t{async sign(e,t,o){return e}}e.s(["NoAuthSigner",()=>t])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5bd4dad1._.js.map