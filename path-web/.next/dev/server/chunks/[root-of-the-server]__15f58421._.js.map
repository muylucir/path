{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/ec2-user/project/path/path-web/lib/aws/dynamodb.ts"],"sourcesContent":["import { DynamoDBClient } from \"@aws-sdk/client-dynamodb\";\nimport {\n  DynamoDBDocumentClient,\n  PutCommand,\n  GetCommand,\n  ScanCommand,\n  DeleteCommand,\n} from \"@aws-sdk/lib-dynamodb\";\nimport type { Session, SessionListItem } from \"@/lib/types\";\n\nconst client = new DynamoDBClient({\n  region: process.env.AWS_REGION || \"us-east-1\",\n});\n\nconst docClient = DynamoDBDocumentClient.from(client);\nconst TABLE_NAME = \"path-agent-sessions\";\n\nexport async function saveSession(sessionData: Omit<Session, \"session_id\" | \"timestamp\">): Promise<string> {\n  const session_id = crypto.randomUUID();\n  const timestamp = new Date().toISOString();\n\n  const item: Session = {\n    session_id,\n    timestamp,\n    ...sessionData,\n  };\n\n  await docClient.send(\n    new PutCommand({\n      TableName: TABLE_NAME,\n      Item: item,\n    })\n  );\n\n  return session_id;\n}\n\nexport async function loadSession(sessionId: string): Promise<Session | null> {\n  const response = await docClient.send(\n    new GetCommand({\n      TableName: TABLE_NAME,\n      Key: { session_id: sessionId },\n    })\n  );\n\n  return (response.Item as Session) || null;\n}\n\nexport async function listSessions(limit: number = 10): Promise<SessionListItem[]> {\n  const response = await docClient.send(\n    new ScanCommand({\n      TableName: TABLE_NAME,\n      Limit: limit,\n      ProjectionExpression: \"session_id, #ts, pain_point, feasibility_score\",\n      ExpressionAttributeNames: { \"#ts\": \"timestamp\" },\n    })\n  );\n\n  const items = (response.Items || []) as SessionListItem[];\n  return items.sort((a, b) => b.timestamp.localeCompare(a.timestamp));\n}\n\nexport async function deleteSession(sessionId: string): Promise<void> {\n  await docClient.send(\n    new DeleteCommand({\n      TableName: TABLE_NAME,\n      Key: { session_id: sessionId },\n    })\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AASA,MAAM,SAAS,IAAI,6OAAc,CAAC;IAChC,QAAQ,QAAQ,GAAG,CAAC,UAAU,IAAI;AACpC;AAEA,MAAM,YAAY,0OAAsB,CAAC,IAAI,CAAC;AAC9C,MAAM,aAAa;AAEZ,eAAe,YAAY,WAAsD;IACtF,MAAM,aAAa,OAAO,UAAU;IACpC,MAAM,YAAY,IAAI,OAAO,WAAW;IAExC,MAAM,OAAgB;QACpB;QACA;QACA,GAAG,WAAW;IAChB;IAEA,MAAM,UAAU,IAAI,CAClB,IAAI,8NAAU,CAAC;QACb,WAAW;QACX,MAAM;IACR;IAGF,OAAO;AACT;AAEO,eAAe,YAAY,SAAiB;IACjD,MAAM,WAAW,MAAM,UAAU,IAAI,CACnC,IAAI,8NAAU,CAAC;QACb,WAAW;QACX,KAAK;YAAE,YAAY;QAAU;IAC/B;IAGF,OAAO,AAAC,SAAS,IAAI,IAAgB;AACvC;AAEO,eAAe,aAAa,QAAgB,EAAE;IACnD,MAAM,WAAW,MAAM,UAAU,IAAI,CACnC,IAAI,gOAAW,CAAC;QACd,WAAW;QACX,OAAO;QACP,sBAAsB;QACtB,0BAA0B;YAAE,OAAO;QAAY;IACjD;IAGF,MAAM,QAAS,SAAS,KAAK,IAAI,EAAE;IACnC,OAAO,MAAM,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,CAAC,aAAa,CAAC,EAAE,SAAS;AACnE;AAEO,eAAe,cAAc,SAAiB;IACnD,MAAM,UAAU,IAAI,CAClB,IAAI,oOAAa,CAAC;QAChB,WAAW;QACX,KAAK;YAAE,YAAY;QAAU;IAC/B;AAEJ"}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file:///home/ec2-user/project/path/path-web/app/api/sessions/route.ts"],"sourcesContent":["import { NextRequest } from \"next/server\";\nimport { saveSession, listSessions } from \"@/lib/aws/dynamodb\";\n\nexport async function POST(req: NextRequest) {\n  try {\n    const sessionData = await req.json();\n    const sessionId = await saveSession(sessionData);\n    \n    return Response.json({ session_id: sessionId });\n  } catch (error) {\n    console.error(\"Error saving session:\", error);\n    return new Response(\n      JSON.stringify({ error: \"세션 저장 중 오류가 발생했습니다\" }),\n      {\n        status: 500,\n        headers: { \"Content-Type\": \"application/json\" },\n      }\n    );\n  }\n}\n\nexport async function GET() {\n  try {\n    const sessions = await listSessions(10);\n    return Response.json({ sessions });\n  } catch (error) {\n    console.error(\"Error listing sessions:\", error);\n    return new Response(\n      JSON.stringify({ error: \"세션 목록 조회 중 오류가 발생했습니다\" }),\n      {\n        status: 500,\n        headers: { \"Content-Type\": \"application/json\" },\n      }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;AACA;;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,cAAc,MAAM,IAAI,IAAI;QAClC,MAAM,YAAY,MAAM,IAAA,8JAAW,EAAC;QAEpC,OAAO,SAAS,IAAI,CAAC;YAAE,YAAY;QAAU;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,IAAI,SACT,KAAK,SAAS,CAAC;YAAE,OAAO;QAAqB,IAC7C;YACE,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;IAEJ;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,+JAAY,EAAC;QACpC,OAAO,SAAS,IAAI,CAAC;YAAE;QAAS;IAClC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,IAAI,SACT,KAAK,SAAS,CAAC;YAAE,OAAO;QAAwB,IAChD;YACE,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;IAEJ;AACF"}}]
}